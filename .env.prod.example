# =============================================================================
# AegisFlows IAM Service - PRODUCTION Configuration
# =============================================================================
# CRITICAL: Change ALL default values before deploying to production!
# =============================================================================

# Environment Configuration
# -------------------------
ENVIRONMENT=production

# Database Configuration
# -----------------------
POSTGRES_DB=keycloak_prod
POSTGRES_USER=keycloak_prod
POSTGRES_PASSWORD=<CHANGE_ME_STRONG_PASSWORD_32_CHARS>
DB_PORT=5432

# Keycloak Admin Configuration
# ----------------------------
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=<CHANGE_ME_STRONG_PASSWORD_32_CHARS>

# Keycloak Network Configuration
# -------------------------------
KC_HOSTNAME=your-domain.com
KEYCLOAK_PORT=8080
KEYCLOAK_HTTPS_PORT=8443
KEYCLOAK_MGMT_PORT=9000

# SSL/TLS Configuration
# ---------------------
KC_HTTPS_CERTIFICATE_FILE=/opt/keycloak/certs/server.crt
KC_HTTPS_CERTIFICATE_KEY_FILE=/opt/keycloak/certs/server.key
KC_HTTPS_KEYSTORE_FILE=/opt/keycloak/certs/server.keystore
KC_HTTPS_KEYSTORE_PASSWORD=<CHANGE_ME_KEYSTORE_PASSWORD>

# Security Configuration
# -----------------------
KC_SPI_TOKEN_STORE_JPA_SESSION_TIMEOUT=1800
KC_SPI_LOGIN_PROTOCOL_OPENID_CONNECT_LEGACY_LOGOUT_REDIRECT_URI=false
KC_HTTP_COOKIE_SAME_SITE=Strict

# Database Pool Settings
# -----------------------
KC_DB_POOL_INITIAL_SIZE=10
KC_DB_POOL_MAX_SIZE=50
KC_DB_POOL_MIN_SIZE=10

# JVM Settings for Production
# ----------------------------
JAVA_OPTS_APPEND="-Xms1g -Xmx2g -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -Djava.net.preferIPv4Stack=true -XX:+HeapDumpOnOutOfMemoryError"

# Backup Configuration
# --------------------
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1

# Monitoring Configuration
# ------------------------
PROMETHEUS_ENABLED=true
GRAFANA_ADMIN_PASSWORD=<CHANGE_ME_GRAFANA_PASSWORD>

# Rate Limiting
# -------------
KC_SPI_RATE_LIMIT_ENABLED=true
KC_SPI_RATE_LIMIT_LOGIN_ATTEMPTS=5
KC_SPI_RATE_LIMIT_LOGIN_TIME_WINDOW=300

# Email Configuration (for notifications)
# ---------------------------------------
KC_SPI_EMAIL_SMTP_HOST=smtp.your-domain.com
KC_SPI_EMAIL_SMTP_PORT=587
KC_SPI_EMAIL_SMTP_FROM=noreply@your-domain.com
KC_SPI_EMAIL_SMTP_USERNAME=<SMTP_USERNAME>
KC_SPI_EMAIL_SMTP_PASSWORD=<SMTP_PASSWORD>
KC_SPI_EMAIL_SMTP_SSL=true
KC_SPI_EMAIL_SMTP_STARTTLS=true